import{a as b,b as R}from"./chunk-DB6PNAND.js";import"./chunk-6U7MSXUP.js";import{a as ee}from"./chunk-7W3ALKSK.js";import{a as te,b as v,c as ie,d as re,e as T,g as C,i as ne,j as oe,k as ce,l as ae,m as pe,n as me,s as se,u as de}from"./chunk-AYW3NSXX.js";import{D as m,E as d,J as l,L as x,M as c,N as o,O as s,P as z,R as f,S as X,T as B,U as H,V as a,W as _,X as J,Y as K,_ as Q,ea as I,g as q,j as V,ma as E,na as W,o as N,oa as S,p as k,pa as Y,qa as Z,r as y,s as u,sa as M,t as j,w as U,wa as le,x as $,z as w}from"./chunk-G4DRSHJR.js";function Ce(i,e){if(i&1&&(c(0,"li",9),a(1),o()),i&2){let g=e.$implicit;m(1),K(" ",g.name," - ",g.amount," ")}}var fe=(()=>{let e=class e{constructor(r,t,n,p){this.recipeService=r,this.route=t,this.router=n,this.dataStorageService=p}ngOnInit(){this.route.params.subscribe(r=>{this.id=+r.id,this.recipe=this.recipeService.getRecipe(this.id)})}onAddToShoppingList(){this.recipeService.addIngredientsToShoppingList(this.recipe.ingredients)}onEditRecipe(){this.router.navigate(["edit"],{relativeTo:this.route})}onDeleteRecipe(){this.recipeService.deleteRecipe(this.id),this.router.navigate(["/recipes"]),this.dataStorageService.storeRecipes()}};e.\u0275fac=function(t){return new(t||e)(d(b),d(E),d(S),d(R))},e.\u0275cmp=u({type:e,selectors:[["app-recipe-detail"]],decls:29,vars:5,consts:[[1,"row"],[1,"col-xs-12"],[1,"img-fluid",2,"max-width","300px",3,"src","alt"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-primary","dropdown-toggle"],[1,"dropdown-menu"],[1,"dropdown-item",2,"cursor","pointer",3,"click"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"div",1),s(2,"img",2),o()(),c(3,"div",0)(4,"div",1)(5,"h2"),a(6),o()()(),c(7,"div",0)(8,"div",1)(9,"div",3)(10,"button",4),a(11," Manage Recipe "),o(),c(12,"ul",5)(13,"li")(14,"a",6),f("click",function(){return n.onAddToShoppingList()}),a(15,"To Shopping List"),o()(),c(16,"li")(17,"a",6),f("click",function(){return n.onEditRecipe()}),a(18,"Edit Recipe"),o()(),c(19,"li")(20,"a",6),f("click",function(){return n.onDeleteRecipe()}),a(21,"Delete Recipe"),o()()()()()(),c(22,"div",0)(23,"div",1),a(24),o()(),c(25,"div",0)(26,"div",1)(27,"ul",7),x(28,Ce,2,2,"li",8),o()()()),t&2&&(m(2),B("alt",n.recipe.name),l("src",n.recipe.imagePath,w),m(4),_(n.recipe.name),m(18),J(" ",n.recipe.description," "),m(4),l("ngForOf",n.recipe.ingredients))},dependencies:[I]});let i=e;return i})();function ye(i,e){if(i&1){let g=z();c(0,"div",18)(1,"div",19),s(2,"input",20),o(),c(3,"div",21),s(4,"input",22),o(),c(5,"div",21)(6,"button",23),f("click",function(){let n=U(g).index,p=X();return $(p.onDeleteIngredient(n))}),a(7,"X"),o()()()}if(i&2){let g=e.index;l("formGroupName",g)}}var L=(()=>{let e=class e{constructor(r,t,n,p){this.route=r,this.recipeService=t,this.router=n,this.dataStorageService=p,this.editMode=!1}ngOnInit(){this.route.params.subscribe(r=>{this.id=r.id,this.editMode=r.id!=null,this.initForm()})}initForm(){let r="",t="",n="",p=new se([]);if(this.editMode){let F=this.recipeService.getRecipe(this.id);if(r=F.name,t=F.imagePath,n=F.description,F.ingredients)for(let G of F.ingredients)p.push(new T({name:new C(G.name,v.required),amount:new C(G.amount,[v.required,v.pattern(/^[1-9]+[0-9]*$/)])}))}this.recipeForm=new T({name:new C(r,v.required),imagePath:new C(t,v.required),description:new C(n,v.required),ingredients:p})}get controls(){return this.recipeForm.get("ingredients").controls}onAddIngredient(){this.recipeForm.get("ingredients").push(new T({name:new C(null,v.required),amount:new C(null,[v.required,v.pattern(/^[1-9]+[0-9]*$/)])}))}onSubmit(){this.editMode?(this.recipeService.updateRecipe(this.id,this.recipeForm.value),this.dataStorageService.storeRecipes()):(this.recipeService.addRecipe(this.recipeForm.value),this.dataStorageService.storeRecipes()),this.onCancel()}onCancel(){this.router.navigate(["../"],{relativeTo:this.route})}onDeleteIngredient(r){this.recipeForm.get("ingredients").removeAt(r)}};e.\u0275fac=function(t){return new(t||e)(d(E),d(b),d(S),d(R))},e.\u0275cmp=u({type:e,selectors:[["app-recipe-edit"]],decls:38,vars:4,consts:[[1,"row"],[1,"col-12"],[3,"formGroup","ngSubmit"],[1,"row","mb-3"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],[1,"form-group"],["for","name"],["id","name","type","text","formControlName","name",1,"form-control"],["for","imagePath"],["id","imagePath","type","text","formControlName","imagePath",1,"form-control"],["imagePath",""],["alt","",1,"img-fluid",3,"src"],["for","description"],["id","description","rows","6","formControlName","description",1,"form-control"],["formArrayName","ingredients",1,"col-12"],["class","row mb-2",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-success",3,"click"],[1,"row","mb-2",3,"formGroupName"],[1,"col-8"],["type","text","formControlName","name",1,"form-control"],[1,"col-2"],["type","number","formControlName","amount",1,"form-control"],["type","button",1,"btn","btn-danger","w-100",3,"click"]],template:function(t,n){if(t&1&&(c(0,"div",0)(1,"div",1)(2,"form",2),f("ngSubmit",function(){return n.onSubmit()}),c(3,"div",3)(4,"div",1)(5,"button",4),a(6,"Save"),o(),c(7,"button",5),f("click",function(){return n.onCancel()}),a(8,"Cancel"),o()()(),c(9,"div",3)(10,"div",1)(11,"div",6)(12,"label",7),a(13,"Name"),o(),s(14,"input",8),o()()(),c(15,"div",3)(16,"div",1)(17,"div",6)(18,"label",9),a(19,"Image URL"),o(),s(20,"input",10,11),o()()(),c(22,"div",3)(23,"div",1),s(24,"img",12),o()(),c(25,"div",3)(26,"div",1)(27,"div",6)(28,"label",13),a(29,"Description"),o(),s(30,"textarea",14),o()()(),c(31,"div",0)(32,"div",15),x(33,ye,8,1,"div",16),c(34,"div",0)(35,"div",1)(36,"button",17),f("click",function(){return n.onAddIngredient()}),a(37,"Add Ingredient"),o()()()()()()()()),t&2){let p=H(21);m(2),l("formGroup",n.recipeForm),m(3),l("disabled",!n.recipeForm.valid),m(19),l("src",p.value,w),m(9),l("ngForOf",n.controls)}},dependencies:[ne,te,oe,ie,re,ce,me,ae,pe,I],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%], textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}"]});let i=e;return i})();var we=i=>[i],ve=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u({type:e,selectors:[["app-recipe-item"]],inputs:{recipe:"recipe",index:"index"},decls:9,vars:7,consts:[[1,"list-group",2,"cursor","pointer",3,"routerLink"],["routerLinkActive","active",1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"img-fluid",2,"width","50px",3,"src","alt"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"a",1)(2,"div")(3,"h4"),a(4),o(),c(5,"p",2),a(6),o()(),c(7,"div"),s(8,"img",3),o()()()),t&2&&(l("routerLink",Q(5,we,n.index)),m(4),_(n.recipe.name),m(2),_(n.recipe.description),m(2),l("src",n.recipe.imagePath,w)("alt",n.recipe.name))},dependencies:[Y,Z]});let i=e;return i})();function Ie(i,e){if(i&1&&s(0,"app-recipe-item",4),i&2){let g=e.$implicit,r=e.index;l("recipe",g)("index",r)}}var he=(()=>{let e=class e{constructor(r,t,n){this.recipeService=r,this.router=t,this.route=n}ngOnInit(){this.subscription=this.recipeService.recipesChanged.subscribe(r=>{this.recipes=r}),this.recipes=this.recipeService.getRecipes()}onNewRecipe(){this.router.navigate(["new"],{relativeTo:this.route})}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(t){return new(t||e)(d(b),d(S),d(E))},e.\u0275cmp=u({type:e,selectors:[["app-recipe-list"]],decls:8,vars:1,consts:[[1,"row"],[1,"col-xs-12"],[1,"btn","btn-success",3,"click"],[3,"recipe","index",4,"ngFor","ngForOf"],[3,"recipe","index"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"div",1)(2,"button",2),f("click",function(){return n.onNewRecipe()}),a(3,"New Recipe"),o()()(),s(4,"hr"),c(5,"div",0)(6,"div",1),x(7,Ie,1,2,"app-recipe-item",3),o()()),t&2&&(m(7),l("ngForOf",n.recipes))},dependencies:[I,ve]});let i=e;return i})();var ge=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u({type:e,selectors:[["app-recipe-start"]],decls:2,vars:0,template:function(t,n){t&1&&(c(0,"h3"),a(1,"Please select a Recipe!"),o())}});let i=e;return i})();var Se=(()=>{let e=class e{constructor(r){this.dataStorageService=r}ngOnInit(){this.dataStorageService.fetchRecipes().subscribe()}};e.\u0275fac=function(t){return new(t||e)(d(R))},e.\u0275cmp=u({type:e,selectors:[["app-recipes"]],decls:5,vars:0,consts:[[1,"row"],[1,"col-md-5"],[1,"col-md-7"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"div",1),s(2,"app-recipe-list"),o(),c(3,"div",2),s(4,"router-outlet"),o()())},dependencies:[W,he]});let i=e;return i})();var be=(()=>{let e=class e{constructor(r,t){this.authService=r,this.router=t}canActivate(r,t){return this.authService.user.pipe(V(1),q(n=>n?!0:this.router.createUrlTree(["/auth"])))}};e.\u0275fac=function(t){return new(t||e)(y(ee),y(S))},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var P=(()=>{let e=class e{constructor(r,t){this.dataStorageService=r,this.recipeService=t}resolve(r,t){let n=this.recipeService.getRecipes();return n.length===0?this.dataStorageService.fetchRecipes():n}};e.\u0275fac=function(t){return new(t||e)(y(R),y(b))},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Fe=[{path:"",component:Se,canActivate:[be],children:[{path:"",component:ge},{path:"new",component:L},{path:":id",component:fe,resolve:[P]},{path:":id/edit",component:L,resolve:[P]}]}],Re=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=j({type:e}),e.\u0275inj=k({imports:[M.forChild(Fe),M]});let i=e;return i})();var at=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=j({type:e}),e.\u0275inj=k({imports:[de,Re,le]});let i=e;return i})();export{at as RecipesModule};
